<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Egemen Akyildiz">

<title>tp4_akyildiz</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="tp4_akyildiz_files/libs/clipboard/clipboard.min.js"></script>
<script src="tp4_akyildiz_files/libs/quarto-html/quarto.js"></script>
<script src="tp4_akyildiz_files/libs/quarto-html/popper.min.js"></script>
<script src="tp4_akyildiz_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="tp4_akyildiz_files/libs/quarto-html/anchor.min.js"></script>
<link href="tp4_akyildiz_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tp4_akyildiz_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="tp4_akyildiz_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="tp4_akyildiz_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="tp4_akyildiz_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">tp4_akyildiz</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Egemen Akyildiz </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Nous allons aujourd’hui nous intéresser aux élections fédérales canadiennes de 2019. Pour obtenir les données nécessaires nous avons scrapé des données de la page Wikipedia dédiée à cet élection. Cette page contient les données de plusieurs sondages qui ont collecté l’intention de vote des canadiens pour cette élection. Cette élection est celle qui a donné son deuxième mandat au Premier ministre Justin Trudeau. Mais quelle est la raison par laquelle il a remporté son deuxième mandat? Après plusieurs scandales comme l’affaire SNC-Lavallin et son voyage de luxe aux frais des contribuables il a quand même repris son siège malgré que son parti soit minoritaire au parlementaire. Évidemment, il y a plusieurs raisons possibles pour cela. Nous allons continuer ce travail en assumant que la raison principale des victoires du parti Libéral viennent de la faiblesse de l’autre parti de gauche le NPD. Pour vérifier cette hypothèse nous allons mesurer l’intention de vote pour le parti libéral et néodémocratique, et nous attendre à une relation négative. Un vote que le NPD perd va probablement aller au libéral et certainement pas au parti conservateur vue la différence idéologique.</p>
</section>
<section id="description-des-variables" class="level2">
<h2 class="anchored" data-anchor-id="description-des-variables">Description des variables</h2>
<p>Les variables de ce sondage sont assez simple. La première variable est nominale, le nom de l’entreprise qui a donné le sondage. La deuxième variable est le dernier jour que le sondage a été donné et elle est en format de date, sa propre catégorie de variable que nous avons formaté ainsi. Les 6 variables suivantes sont l’intention de vote en pourcentage des différents partis politiques canadiens. Nous les avons transformées en variable numérique pour que le graphique soit juste. La variable suivante est la marge d’erreur, qui montre la potentialité d’erreur qu’il y a entre l’échantillon du sondage et la population canadienne qui va voter pour un seuil probable de 95%; cette variable a été converti en numérique et nous avons enlevé les symboles non nécessaires. Certaines observations de cette sont absentes. La variable qui suit est la taille de l’échantillon, exprimée en valeur numérique, allant de quelques centaines à quelques milliers. Certaines valeurs sont aussi manquantes ici. La variable suivante est la méthode de sondage, qui va du téléphone à la version en ligne, et bien sûr elle est nominale. La dernière variable est l’avance que le parti favori a sur le deuxième plus populaire parti. Nous l’avons transformé en variable numérique pour mieux caractérisé sa fonction de différence de pourcentage.</p>
</section>
<section id="analyse-des-données" class="level2">
<h2 class="anchored" data-anchor-id="analyse-des-données">Analyse des données</h2>
<p>Nous avons créé deux graphiques, l’un montrant tous les partis politiques, l’autre les deux partis qui nous intéressent vraiment, le PLC et le NPD. Le premier graphique nous montre des résultats assez prévisibles. Le parti conservateur et libéral sont en tête et de loin et quasiment se superposent. Les autres partis sont bien en arrière avec le NPD qui a une avance sur les autres, le parti Vert et le Bloc Québécois sont vers la fin de la période presque égales et le nouveau parti de Maxime Bernier est loin derrière. Ceci n’a rien de surprenant, malgré qu’avec une vision rétrospective, nous pouvons remarquer que le Bloc a eu une bien plus grande part du vote et le parti néodémocrate a perdu tout ce que Jack Layton avait gagné pour ce parti.</p>
<p>Le deuxième graphique qui est celui qui nous intéresse le plus montre l’intention de vote entre le NPD et le PLC. Nous pouvons clairement voir que le PLC a une avance entre 15 et 20% durant la campagne électorale. Mais le sujet qui nous intéresse est s’il y a une relation entre les intentions de vote. Nous rappellons que notre hypothèse se résume à ce principe, le vote entre le NPD et le PLC est un jeu à somme nulle, un vote perdu du NPD est un vote pour le PLC, l’inverse n’est sûrement pas exact puisque certains électeurs plus à droite du PLC peuvent voter pour le parti conservateur idéologiquement proche.</p>
<p>Comme nous pouvons le voir, au début de la période les sondages montrent un grand écart entre le NPD et le parti libéral. Le premier est à 15%, l’autre à 32%. Au milieu de la période le NPD est toujours à 15% mais le parti libéral a une légère hausse vers 33%. Mais comme nous pouvons le constater, de grandes fluctuations prennent lieu conjointement à partir du mois d’octobre, quand les votes pour le parti libéral baissent ceux du NPD augmentent ou vice-versa. Mais à la dernière date de sondage que nous avons scrapé, le NPD est à 19% et le parti libéral à 34%. donc au tout début il y avait une différence de 17% entre le NPD et le parti libéral, et à la toute fin une différence de 15%. Ceci pourrait être négligeable si l’on prend en compte les marges d’erreur. Notre hypothèse n’est donc pas nécessairement prouvé. Mais les fluctuations à partir du mois d’octobre qui vont en sens inverse pour les partis nous gardent toujours dubitatif. La différence le 16 octobre n’est autour que de 7-8%. Si nous avions rajouté le Bloc Québécois à notre analyse, nous aurions sûrement eu une analyse plus précise en prenant en compte le vote des québécois qui ont des revendications supplémentaires au reste du Canada.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Notre hypothèse n’est ni nécessairement réfutée ni prouvée. Cependant nous devrions discuter de la question éthique de la chose. Le webscraping est une pratique utile et relativement efficace pour obtenir des données de site web (Alexander 2023). Mais c’est une pratique qui n’est pas cautionné par le propriétaire de l’information et/ou du site web duquel on l’obtient. Cette personne ou entreprise pourrait très bien ne pas vouloir que l’on se procure ses données à nos fins personnelles. Bien que nous soyons dans un registre académique et non à but lucratif ceci ne nous rend pas moralement juste. Mais dans le cadre de ce travail, nous avons récolté des données de Wikipedia, le plus grand site web gratuit qui offre de l’information au monde entier. Dans un sens, nous n’avons pas nécessairement fait quelque chose de mal sur le plan éthique. Nous aurions pu dans le meilleur des cas obtenir un API des sites de sondage spécifiques, même si cela demanderait beaucoup plus de temps, d’effort et d’argent (Alexander 2023). Au final, nous ne pensons pas avoir été éthiquement injuste, surtout pour une élection qui date de déjà 5 ans.</p>
</section>
<section id="bibliographie" class="level2">
<h2 class="anchored" data-anchor-id="bibliographie">Bibliographie</h2>
<p>Alexander, Rohan. 2023. <em>Telling Stories with Data: With Applications in R.</em> Chapman; Hall/CRC.</p>
</section>
<section id="annexe" class="level2">
<h2 class="anchored" data-anchor-id="annexe">Annexe</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyverse' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ggplot2' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'tidyr' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'readr' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'purrr' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'forcats' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lubridate' was built under R version 4.3.2</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'rvest' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rvest'

The following object is masked from 'package:readr':

    guess_encoding</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>Polls_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"https://en.wikipedia.org/wiki/Opinion_polling_for_the_2019_Canadian_federal_election"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">html_elements</span>(<span class="st">"table"</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> T) <span class="sc">|&gt;</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Entreprises_de_sondages =</span> <span class="st">"Polling firm"</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Dernier_jour_de_sondage =</span> <span class="st">"Last dateof polling[1]"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>         Libéral                <span class="ot">=</span> <span class="st">"LPC"</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Conservateur           =</span> <span class="st">"CPC"</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>         Néodémocrate           <span class="ot">=</span> <span class="st">"NDP"</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Bloquiste              =</span> <span class="st">"BQ"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">Verts                  =</span> <span class="st">"GPC"</span>,</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Populaire              =</span> <span class="st">"PPC"</span>,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">Marge_d_erreur         =</span> <span class="st">"Marginof error[2]"</span>,</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>         Taille_de_l_é<span class="at">chantillon =</span> <span class="st">"Samplesize[3]"</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>         Méthode<span class="at">_de_sondage      =</span> <span class="st">"Polling method[4]"</span>,</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">Favori                   =</span> <span class="st">"Lead"</span> ) <span class="sc">|&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Entreprises_de_sondages <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Link)) <span class="sc">|&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(Marge_d_erreur, Taille_de_l_échantillon, Favori),</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>                <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">str_squish</span>(<span class="fu">str_replace_all</span>(.x, <span class="fu">c</span>(<span class="st">"±"</span> <span class="ot">=</span> <span class="st">""</span>, <span class="st">"pp"</span> <span class="ot">=</span> <span class="st">""</span>, <span class="st">"[:punct:]1[:punct:]4[:punct:]"</span> <span class="ot">=</span> <span class="st">""</span>, <span class="st">","</span> <span class="ot">=</span> <span class="st">""</span>))))),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>         <span class="fu">across</span>(<span class="fu">c</span>(Conservateur<span class="sc">:</span>Populaire, Favori), <span class="sc">~</span> <span class="fu">as.numeric</span>(.x)),</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">Dernier_jour_de_sondage =</span> <span class="fu">mdy</span>(Dernier_jour_de_sondage))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There were 2 warnings in `mutate()`.
The first warning was:
ℹ In argument: `across(...)`.
Caused by warning:
! NAs introduced by coercion
ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Polls_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 116
Columns: 12
$ Entreprises_de_sondages &lt;chr&gt; "Mainstreet Research", "Research Co.", "EKOS",…
$ Dernier_jour_de_sondage &lt;date&gt; 2019-10-20, 2019-10-20, 2019-10-20, 2019-10-2…
$ Libéral                 &lt;dbl&gt; 31.6, 32.0, 34.2, 31.4, 31.0, 34.0, 31.0, 31.7…
$ Conservateur            &lt;dbl&gt; 32.2, 31.0, 30.0, 31.3, 33.0, 32.0, 31.5, 31.4…
$ Néodémocrate            &lt;dbl&gt; 18.3, 19.0, 18.3, 17.8, 18.0, 16.0, 18.8, 17.4…
$ Bloquiste               &lt;dbl&gt; 7.9, 7.0, 5.0, 6.6, 7.0, 8.0, 7.0, 6.6, 9.0, 8…
$ Verts                   &lt;dbl&gt; 6.1, 8.0, 8.1, 9.1, 6.0, 8.0, 9.5, 9.1, 8.3, 6…
$ Populaire               &lt;dbl&gt; 2.8, 2.0, 3.5, 2.7, 3.0, 2.0, 1.8, 2.7, 3.0, 2…
$ Marge_d_erreur          &lt;dbl&gt; 2.17, 3.10, 2.20, 1.40, 2.00, 2.10, 2.40, 1.60…
$ Taille_de_l_échantillon &lt;dbl&gt; 2032, 957, 1994, 1498, 3108, 2000, NA, 1554, 1…
$ Méthode_de_sondage      &lt;chr&gt; "IVR", "online", "telephone/IVR", "online (rol…
$ Favori                  &lt;dbl&gt; 0.6, 1.0, 4.2, 0.1, 2.0, 2.0, 0.5, 0.3, 1.8, 0…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Polls_data, <span class="fu">aes</span>(<span class="at">x =</span> Dernier_jour_de_sondage)) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Libéral, <span class="at">color =</span> <span class="st">"Libéral"</span>)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Conservateur, <span class="at">color =</span> <span class="st">"Conservateur"</span>)) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Néodémocrate, <span class="at">color =</span> <span class="st">"Néodémocrate"</span>)) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Bloquiste, <span class="at">color =</span> <span class="st">"Bloquiste"</span>)) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Verts, <span class="at">color =</span> <span class="st">"Verts"</span>)) <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Populaire, <span class="at">color =</span> <span class="st">"Populaire"</span>)) <span class="sc">+</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Évolution des partis politiques"</span>,</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"%"</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Libéral"</span> <span class="ot">=</span> <span class="st">"red"</span>, </span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Conservateur"</span> <span class="ot">=</span> <span class="st">"blue"</span>, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Néodémocrate"</span> <span class="ot">=</span> <span class="st">"orange"</span>, </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Bloquiste"</span> <span class="ot">=</span> <span class="st">"yellow"</span>, </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Verts"</span> <span class="ot">=</span> <span class="st">"green"</span>, </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>                                 <span class="st">"Populaire"</span> <span class="ot">=</span> <span class="st">"purple"</span>)) <span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tp4_akyildiz_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Polls_data, <span class="fu">aes</span>(<span class="at">x =</span> Dernier_jour_de_sondage)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Libéral, <span class="at">color =</span> <span class="st">"Libéral"</span>)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> Néodémocrate, <span class="at">color =</span> <span class="st">"Néodémocrate"</span>)) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Évolution des partis politiques"</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Date"</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"%"</span>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Libéral"</span> <span class="ot">=</span> <span class="st">"red"</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Néodémocrate"</span> <span class="ot">=</span> <span class="st">"orange"</span>)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="tp4_akyildiz_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>